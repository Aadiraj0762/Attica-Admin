(this["webpackJsonpattica-admin"]=this["webpackJsonpattica-admin"]||[]).push([[41],{110:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(11);function r(e,t){if(null==e)return{};var a,r,s=Object(n.a)(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)a=c[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}},116:function(e,t,a){"use strict";var n=a(131),r=a.n(n),s=a(0),c=a(36);t.a=e=>{const[t,a]=Object(s.useState)([]||!1),[n,l]=Object(s.useState)(""),[o,i]=Object(s.useState)(!0),{isUpdate:d,setIsUpdate:u,currentPage:g,category:b,searchText:j,invoice:p,status:m,zone:h,time:x,sortedField:f,source:O,limitData:y,startDate:v,endDate:w}=Object(s.useContext)(c.a);return Object(s.useEffect)((()=>{let t=!1,n=r.a.CancelToken.source();return(async()=>{try{const r=await e({cancelToken:n.token});t||(a(r),l(""),i(!1))}catch(s){t||(l(s.message),r.a.isCancel(s),l(s.message),i(!1),a([]))}})(),u(!1),()=>{t=!0,n.cancel("Cancelled in cleanup")}}),[d,g,b,j,p,m,h,x,f,O,y,v,w]),{data:t,error:n,loading:o}}},121:function(e,t,a){"use strict";var n=a(94);const r={getAllLanguages:async()=>n.a.get("/language/all"),getShowingLanguage:async()=>n.a.get("/language/show"),getLanguageById:async e=>n.a.get(`/language/${e}`),addLanguage:async e=>n.a.post("/language/add",e),addAllLanguage:async e=>n.a.post("/language/add/all",e),updateLanguage:async(e,t)=>n.a.put(`/language/${e}`,t),updateManyLanguage:async e=>n.a.patch("language/update/many",e),updateStatus:async(e,t)=>n.a.put(`/language/status/${e}`,t),deleteLanguage:async(e,t)=>n.a.patch(`/language/${e}`,t),deleteManyLanguage:async e=>n.a.patch("/language/delete/many",e)};t.a=r},129:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(13);function r(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(r=function(){return!!e})()}var s=a(16);function c(e){var t=r();return function(){var a,r=Object(n.a)(e);if(t){var c=Object(n.a)(this).constructor;a=Reflect.construct(r,arguments,c)}else a=r.apply(this,arguments);return Object(s.a)(this,a)}}},151:function(e,t,a){"use strict";t.a=a.p+"static/media/spinner.da6beb0d.gif"},152:function(e,t,a){"use strict";a(0);var n=a(35),r=a(1);t.a=e=>{let{label:t}=e;return Object(r.jsx)(n.Label,{className:"col-span-4 sm:col-span-2 font-medium text-sm",children:t})}},155:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(31);var r=a(48),s=a(39);function c(e){return function(e){if(Array.isArray(e))return Object(n.a)(e)}(e)||Object(r.a)(e)||Object(s.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},170:function(e,t,a){"use strict";a(0);var n=a(1);t.a=e=>{let{errorName:t}=e;return Object(n.jsx)(n.Fragment,{children:t&&Object(n.jsx)("span",{className:"text-red-400 text-sm mt-2",children:t.message})})}},179:function(e,t,a){"use strict";var n=a(0),r=a(116),s=a(121),c=a(36),l=a(1);var o=e=>{let{handleSelectLanguage:t,register:a}=e;const{data:o,loading:i,error:d}=Object(r.a)(s.a.getShowingLanguage),{lang:u}=Object(n.useContext)(c.a);return Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("select",{name:"language",...a("language",{required:"language is required!"}),onChange:e=>t(e.target.value),className:"dark:border-gray-600 focus:shadow-none w-20 h-8 px-2 py-1 mt-1 text-gray-800 dark:text-gray-300 form-select outline-none text-sm focus:outline-none block rounded-md bg-gray-50 border-transparent focus:bg-white border-green-400 dark:bg-gray-700 focus:border-green-400 dark:focus:border-green-400 focus:ring focus:ring-green-200 dark:focus:ring-green-200",children:[Object(l.jsx)("option",{value:u,defaultChecked:!0,hidden:!0,children:u}),!d&&!i&&(null===o||void 0===o?void 0:o.map((e=>Object(l.jsxs)("option",{value:e.iso_code,children:[e.iso_code," "]},e._id))))]})})};t.a=e=>{let{title:t,description:a,handleSelectLanguage:n,register:r}=e;return Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("div",{className:"flex md:flex-row flex-col justify-between mr-20",children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("h4",{className:"text-xl font-medium dark:text-gray-300",children:t}),Object(l.jsx)("p",{className:"mb-0 text-sm dark:text-gray-300",children:a})]}),n&&Object(l.jsx)(o,{handleSelectLanguage:n,register:r})]})})}},203:function(e,t,a){"use strict";a(0);var n=a(35),r=a(1);t.a=e=>{let{register:t,defaultValue:a,required:s,name:c,label:l,type:o,placeholder:i}=e;return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(n.Input,{...t(`${c}`,{required:!s&&`${l} is required!`}),defaultValue:a,type:o,placeholder:i,name:c,className:"border h-12 text-sm focus:outline-none block w-full bg-gray-100 dark:bg-white border-transparent focus:bg-white"})})}},258:function(e,t,a){"use strict";var n=a(0),r=a(35),s=a(89),c=a(36),l=a(151),o=a(1);t.a=e=>{let{id:t,title:a,isSubmitting:i}=e;const{t:d}=Object(s.a)(),{toggleDrawer:u,isDrawerOpen:g}=Object(n.useContext)(c.a);return Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)("div",{className:"fixed z-10 bottom-0 w-full right-0 py-4 lg:py-8 px-6 grid gap-4 lg:gap-6 xl:gap-6 md:flex xl:flex bg-gray-50 border-t border-gray-100 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300",style:{right:!g&&-50},children:[Object(o.jsx)("div",{className:"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:Object(o.jsx)(r.Button,{id:"styleButton",onClick:u,className:"h-12 bg-white w-full text-red-500 hover:bg-red-50 hover:border-red-100 hover:text-red-600 dark:bg-gray-700 dark:border-gray-700 dark:text-gray-500 dark:hover:bg-gray-800 dark:hover:text-red-700",layout:"outline",children:d("CancelBtn")})}),Object(o.jsx)("div",{className:"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:i?Object(o.jsxs)(r.Button,{disabled:!0,type:"button",className:"w-full h-12",children:[Object(o.jsx)("img",{src:l.a,alt:"Loading",width:20,height:10})," ",Object(o.jsx)("span",{className:"font-serif ml-2 font-light",children:"Processing"})]}):Object(o.jsx)(r.Button,{id:"styleButton",type:"submit",className:"w-full h-12",children:t?Object(o.jsxs)("span",{children:[d("UpdateBtn")," ",a]}):Object(o.jsxs)("span",{children:["Add ",a]})})})]})})}},261:function(e,t,a){"use strict";var n=a(94);const r={getProductions:async()=>n.a.get("/productions/"),getProductionById:async e=>n.a.get(`/productions/${e}`),createProduction:async e=>n.a.post("productions/add",e),updateProduction:async(e,t)=>n.a.put(`/productions/${e}`,t),deleteProduction:async(e,t)=>n.a.delete(`/productions/${e}`)};t.a=r},846:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(209),s=(a(43),a(36)),c=a(261),l=a(37),o=a(35),i=a(258),d=(a(170),a(203),a(152)),u=a(179),g=a(262),b=a(737),j=(a(131),a(38)),p=a(109),m=a(1);t.default=e=>{let{id:t}=e;const{isDrawerOpen:a,closeDrawer:h,setIsUpdate:x,lang:f}=Object(n.useContext)(s.a),[O,y]=Object(n.useState)(null),[v,w]=Object(n.useState)(""),[k,N]=Object(n.useState)(""),[S,I]=Object(n.useState)([]),[C,P]=Object(n.useState)([]),[B,q]=Object(n.useState)(null),[L,$]=Object(n.useState)({}),[A,E]=Object(n.useState)(f),[D,F]=Object(n.useState)(!1),[T,U]=Object(n.useState)([]),[V,_]=Object(n.useState)([]),{register:R,handleSubmit:z,setValue:J,clearErrors:M,formState:{errors:Q,reset:G}}=Object(r.a)();Object(n.useEffect)((()=>{fetch("https://attica.onrender.com/api/productItem").then((e=>e.json())).then((e=>{I(e);const t=e.map((e=>({value:e.variants,label:e.variants})));P(t)})).catch((e=>console.error("Error fetching products:",e)))}),[]);Object(n.useEffect)((()=>{fetch("https://attica.onrender.com/api/items").then((e=>e.json())).then((e=>_(e.products))).catch((e=>console.error("Error fetching products:",e)))}),[]);return Object(n.useEffect)((()=>{t&&(async()=>{try{const e=await c.a.getProductionById(t);if(e){$(e),J("title",e.title[A||"en"]),w(e.quantity),N(e.price),y({value:e.products[0].value,label:e.products[0].label});const t=e.selectedItems.map((e=>({item:{value:e.item.value,label:e.item.label},quantity:e.quantity})));U(t)}}catch(n){var e,a;Object(l.b)(n?null===n||void 0===n||null===(e=n.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message:n.message)}})()}),[t,J,y,w,N,E,A]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"w-full relative p-6 border-b border-gray-100 bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300 ",children:Object(m.jsx)(u.a,{register:R,handleSelectLanguage:e=>{E(e),Object.keys(L).length>0&&J("title",L.title[e||"en"])},title:t?Object(j.b)("Update Production"):Object(j.b)("Add Production")})}),Object(m.jsx)(g.Scrollbars,{className:"w-full md:w-7/12 lg:w-8/12 xl:w-8/12",children:Object(m.jsx)("form",{onSubmit:z((async e=>{console.log("coupon data",e);try{F(!0);const a={title:O?O.label:"",quantity:e.quantity,price:e.price,products:[O],variants:[B],selectedItems:T.map((e=>({item:{value:e.item.value,label:e.item.label},quantity:e.quantity})))};if(t){const e=await c.a.updateProduction(t,a);x(!0),F(!1),Object(l.c)("Production updated successfully"),console.log(e),G(),h()}else{await c.a.createProduction(a);x(!0),F(!1),Object(l.c)("Production added successfully"),G(),h()}}catch(r){var a,n;Object(l.b)(r?null===r||void 0===r||null===(a=r.response)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.message:r.message),F(!1),h()}})),children:Object(m.jsxs)("div",{className:"px-6 pt-8 flex-grow scrollbar-hide w-full max-h-full pb-40",children:[Object(m.jsxs)("center",{children:[" ",Object(m.jsx)("span",{children:"Select The Raw Materials From the Below Select Box"})]}),Object(m.jsx)("br",{}),Object(m.jsxs)(o.Button,{onClick:()=>{U([...T,{item:null,quantity:0}]),console.log("Selected Items:",T)},className:"rounded-md h-12",children:[Object(m.jsx)("span",{className:"mr-2",children:Object(m.jsx)(p.i,{})}),Object(j.b)("Add")]}),T.map(((e,t)=>Object(m.jsxs)("div",{className:"flex items-center space-x-2 col-span-8 sm:col-span-4",children:[Object(m.jsx)(b.a,{id:"alignSelect",name:`item-${t}`,className:"col-span-5 h-12",options:V&&V.map((e=>({value:e._id,label:e.title.en}))),value:e.item||null,onChange:e=>{const a=[...T];a[t].item=e,U(a)}}),Object(m.jsx)(o.Input,{style:{marginBottom:"10px"},type:"number",className:"border h-12 text-sm  col-span-5 block bg-gray-100 dark:bg-white border-transparent focus:bg-white",value:e.quantity,onChange:e=>{const a=[...T];a[t].quantity=e.target.value,U(a)}}),Object(m.jsx)(o.Button,{onClick:()=>(e=>{if(T.length>1){const t=[...T];t.splice(e,1),U(t),console.log("Selected Items:",t)}else console.log("At least one item must remain in selectedItems array.")})(t),className:" btn btn-danger  rounded-sm h-12 ",id:"removeItem",style:{backgroundColor:"#ff0000",marginBottom:"10px"},children:Object(m.jsx)("span",{className:"mr-2",children:Object(m.jsxs)("b",{children:[" ",Object(m.jsx)(p.o,{style:{color:"#ffffff"}})]})})})]},t))),Object(m.jsx)("br",{}),Object(m.jsxs)("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[Object(m.jsx)(d.a,{label:"Items : "}),Object(m.jsx)("div",{className:"col-span-8 sm:col-span-4",children:Object(m.jsx)(b.a,{options:S.map((e=>({value:e._id,label:e.title}))),value:O,onChange:e=>{if(y(e),e){const t=S.find((t=>t._id===e.value));q(t?{value:t.variants,label:t.variants}:null)}else q(null)}})})]}),Object(m.jsxs)("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[Object(m.jsx)(d.a,{label:"Variants: "}),Object(m.jsx)("div",{className:"col-span-8 sm:col-span-4",children:Object(m.jsx)(b.a,{name:"variants",options:C,value:B,isDisabled:!0})})]}),Object(m.jsxs)("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[Object(m.jsx)(d.a,{label:"Quantity : "}),Object(m.jsx)("div",{className:"col-span-8 sm:col-span-4",children:Object(m.jsx)(o.Input,{name:"quantity",...R("quantity"),type:"text",value:v,placeholder:"20",onChange:e=>w(e.target.value),className:"border h-12 text-sm focus:outline-none block w-full bg-gray-100 dark:bg-white border-transparent focus:bg-white"})})]}),Object(m.jsxs)("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[Object(m.jsx)(d.a,{label:"Production Price : "}),Object(m.jsx)("div",{className:"col-span-8 sm:col-span-4",children:Object(m.jsx)(o.Input,{name:"price",...R("price"),type:"number",value:k,placeholder:"200$",maxValue:2e3,minValue:1,label:"Price",onChange:e=>N(e.target.value),className:"border h-12 text-sm focus:outline-none block w-full bg-gray-100 dark:bg-white border-transparent focus:bg-white"})})]}),Object(m.jsx)(i.a,{id:t,title:"Purchase"})]})})})]})}},94:function(e,t,a){"use strict";var n=a(131),r=a.n(n),s=a(15),c=a.n(s);const l=r.a.create({baseURL:"https://attica.onrender.com/api/",timeout:5e4,headers:{Accept:"application/json","Content-Type":"application/json"}});l.interceptors.request.use((function(e){let t,a;return c.a.get("adminInfo")&&(t=JSON.parse(c.a.get("adminInfo"))),c.a.get("company")&&(a=c.a.get("company")),{...e,headers:{authorization:t?`Bearer ${t.token}`:null,company:a||null}}}));const o=e=>e.data,i={get:(e,t,a)=>l.get(e,t,a).then(o),post:(e,t)=>l.post(e,t).then(o),put:(e,t,a)=>l.put(e,t,a).then(o),patch:(e,t)=>l.patch(e,t).then(o),delete:(e,t)=>l.delete(e,t).then(o)};t.a=i}}]);
//# sourceMappingURL=41.9abe0294.chunk.js.map